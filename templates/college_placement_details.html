{% extends 'base.html' %}
{% block title %}Placement Details - {{ college_name }}{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<style>
    /* Use similar styles as college_dashboard.html */
    .glass-card {
        background: rgba(26, 27, 46, 0.6); backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.08);
    }
    .table-dark-glass th { background-color: rgba(17, 24, 39, 0.8); }
    .table-dark-glass td { background-color: rgba(31, 41, 55, 0.7); border-color: rgba(55, 65, 81, 0.5); }
    .table-dark-glass tr:hover td { background-color: rgba(55, 65, 81, 0.8); }
    .btn-view-profile {
        background-color: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.3);
        color: #93c5fd; transition: all 0.2s ease; font-size: 0.8rem; padding: 0.3rem 0.6rem;
    }
    .btn-view-profile:hover { background-color: rgba(59, 130, 246, 0.3); color: #bfdbfe; transform: scale(1.05); }
    .status-badge { font-size: 0.75rem; padding: 0.2rem 0.6rem; border-radius: 9999px; font-weight: 500; }
    .status-placed { background-color: rgba(16, 185, 129, 0.2); color: #6ee7b7; border: 1px solid rgba(16, 185, 129, 0.4); }
    .status-not-placed { background-color: rgba(107, 114, 128, 0.2); color: #9ca3af; border: 1px solid rgba(107, 114, 128, 0.4); }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-7xl">
     <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold bg-gradient-to-r from-violet-400 to-fuchsia-400 bg-clip-text text-transparent">
            Student Placement Details <br class="md:hidden"/> <span class="text-xl text-gray-400 font-normal"> - {{ college_name }}</span>
        </h2>
         <a href="{{ url_for('university_dashboard') }}" class="inline-flex items-center gap-2 px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-sm text-gray-300 hover:bg-gray-600/50 transition-colors">
            <i class="bi bi-arrow-left"></i> Back to University Dashboard
         </a>
     </div>

    <div class="glass-card rounded-2xl p-6 overflow-x-auto">
        <h3 class="text-xl font-semibold mb-4">Student List</h3>
        <table class="w-full text-sm text-left text-gray-300 table-dark-glass rounded-lg overflow-hidden">
            <thead class="text-xs uppercase">
                <tr>
                    <th scope="col" class="px-6 py-3">Student Name</th>
                    <th scope="col" class="px-6 py-3">Reg. No.</th>
                    <th scope="col" class="px-6 py-3 text-center">CGPA</th>
                    <th scope="col" class="px-6 py-3 text-center">Placement Status</th>
                    <th scope="col" class="px-6 py-3">Placed Company</th>
                    <th scope="col" class="px-6 py-3 text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for data in student_data %}
                <tr class="border-b border-gray-700">
                    <td class="px-6 py-4 font-medium whitespace-nowrap">{{ data.info.full_name }}</td>
                    <td class="px-6 py-4">{{ data.info.registration_number }}</td>
                    <td class="px-6 py-4 text-center">{{ data.info.cgpa if data.info.cgpa else 'N/A' }}</td>
                    <td class="px-6 py-4 text-center">
                        {% if data.is_placed %}
                            <span class="status-badge status-placed">Placed</span>
                        {% else %}
                            <span class="status-badge status-not-placed">Not Placed</span>
                        {% endif %}
                    </td>
                    <td class="px-6 py-4">{{ data.company_name if data.company_name else '-' }}</td>
                    <td class="px-6 py-4 text-center">
                        {# Link to the same view_applicant route, accessible by university role #}
                        <a href="{{ url_for('view_applicant', student_id=data.info.id) }}" class="btn-view-profile rounded-lg inline-flex items-center gap-1">
                            <i class="bi bi-person-lines-fill text-xs"></i> View Profile
                        </a>
                    </td>
                </tr>
                {% else %}
                 <tr>
                    <td colspan="6" class="text-center py-4 text-gray-500">No students found for this college.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}