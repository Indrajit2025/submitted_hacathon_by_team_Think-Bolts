<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile - ElevatR</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons Library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Define a cool, animated background */
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: #f0f0f0;
            background: linear-gradient(-45deg, #12121c, #0a0a14, #4f46e5, #00acc1);
            background-size: 400% 400%;
            animation: gradient-animation 25s ease infinite;
            overflow-x: hidden;
        }

        /* Glassmorphism Card Style */
        .glass-card {
            background: rgba(26, 27, 46, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }
        
        /* Modern Form Input Styling */
        .form-input {
            background-color: rgba(17, 24, 39, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #f0f0f0;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            background-color: rgba(31, 41, 55, 0.8);
            color: #f0f0f0;
            border-color: #6366f1;
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.5);
            outline: none;
        }
        
        /* Gradient Button Styling */
        .btn-gradient {
            background-image: linear-gradient(to right, #6366f1, #22d3ee);
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }
        .btn-gradient:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5);
        }
        
        .btn-gradient-danger {
             background-image: linear-gradient(to right, #ef4444, #f87171);
             box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        .btn-gradient-danger:hover {
             box-shadow: 0 6px 20px rgba(239, 68, 68, 0.5);
        }
        
        .list-group-item {
            background-color: rgba(255,255,255,0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        /* Fade-in animation */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeInUp {
            animation: fadeInUp 0.7s ease-out forwards;
        }
    </style>
</head>
<body>
    <!-- Simple Navbar -->
    <nav class="p-4 bg-transparent fixed top-0 left-0 w-full z-10">
        <div class="container mx-auto">
            <a href="{{ url_for('student_profile') }}" class="text-white hover:text-indigo-300 transition-colors duration-300 font-semibold text-lg">
                <i class="bi bi-arrow-left-circle-fill"></i> Back to Profile
            </a>
        </div>
    </nav>
    
    <!-- Main Content Grid -->
    <div class="container mx-auto px-4 py-24 min-h-screen">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">

            <!-- Left Column: Edit Profile -->
            <div class="lg:col-span-3 animate-fadeInUp">
                <div class="glass-card rounded-2xl p-6 h-full">
                    <h2 class="text-3xl font-bold mb-6 text-center bg-gradient-to-r from-white to-cyan-400 bg-clip-text text-transparent">Edit Your Profile</h2>
                    
                    <!-- Flash Messages -->
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            <div class="mb-4">
                            {% for category, message in messages %}
                                <div class="p-3 text-sm rounded-lg {% if category == 'success' %} bg-green-900 text-green-300 border border-green-700 {% else %} bg-red-900 text-red-300 border border-red-700 {% endif %}" role="alert">
                                    {{ message }}
                                </div>
                            {% endfor %}
                            </div>
                        {% endif %}
                    {% endwith %}

                    <form method="POST" enctype="multipart/form-data" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="full_name" class="block mb-2 text-sm font-medium text-gray-300">Full Name</label>
                                <input type="text" id="full_name" name="full_name" value="{{ student.full_name }}" class="form-input w-full rounded-lg p-3 text-sm" required>
                            </div>
                            <div>
                                <label for="email" class="block mb-2 text-sm font-medium text-gray-300">Email</label>
                                <input type="email" id="email" name="email" value="{{ student.email }}" class="form-input w-full rounded-lg p-3 text-sm" required>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                             <div>
                                <label for="mobile" class="block mb-2 text-sm font-medium text-gray-300">Mobile</label>
                                <input type="text" id="mobile" name="mobile" value="{{ student.mobile }}" class="form-input w-full rounded-lg p-3 text-sm">
                            </div>
                            <div>
                                <label for="cgpa" class="block mb-2 text-sm font-medium text-gray-300">CGPA</label>
                                <input type="number" step="0.01" id="cgpa" name="cgpa" value="{{ student.cgpa }}" class="form-input w-full rounded-lg p-3 text-sm" required>
                            </div>
                        </div>
                        <div>
                            <label for="skills" class="block mb-2 text-sm font-medium text-gray-300">Skills (comma-separated)</label>
                            <input type="text" id="skills" name="skills" value="{{ skills }}" class="form-input w-full rounded-lg p-3 text-sm" placeholder="e.g., Python, Flask, HTML, CSS">
                        </div>
                        <div>
                            <label for="profile_photo" class="block mb-2 text-sm font-medium text-gray-300">Update Profile Photo</label>
                            <input type="file" id="profile_photo" name="profile_photo" class="form-input block w-full text-sm rounded-lg cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-900/50 file:text-indigo-300 hover:file:bg-indigo-900">
                        </div>
                        <button type="submit" class="w-full btn-gradient text-white font-semibold py-3 px-6 rounded-xl">Save Changes</button>
                    </form>
                </div>
            </div>

            <!-- Right Column: Projects & Certificates -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Add Project Card -->
                <div class="glass-card rounded-2xl p-6 animate-fadeInUp" style="animation-delay: 0.2s;">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="bi bi-folder-plus text-cyan-400"></i> Add New Project</h3>
                    <form action="{{ url_for('add_project') }}" method="POST" class="space-y-3">
                        <input type="text" name="project_title" required placeholder="Project Title" class="form-input w-full rounded-lg p-3 text-sm">
                        <textarea name="description" rows="2" placeholder="Description" class="form-input w-full rounded-lg p-3 text-sm"></textarea>
                        <input type="url" name="github_link" placeholder="GitHub Link" class="form-input w-full rounded-lg p-3 text-sm">
                        <input type="url" name="site_link" placeholder="Live Site Link" class="form-input w-full rounded-lg p-3 text-sm">
                        <input type="url" name="youtube_link" placeholder="YouTube Link" class="form-input w-full rounded-lg p-3 text-sm">
                        <button type="submit" class="w-full btn-gradient text-white font-semibold py-2 px-4 rounded-xl">Add Project</button>
                    </form>
                </div>

                <!-- Add Certificate Card -->
                <div class="glass-card rounded-2xl p-6 animate-fadeInUp" style="animation-delay: 0.4s;">
                     <h3 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="bi bi-patch-check-fill text-green-400"></i> Add New Certificate</h3>
                    <form action="{{ url_for('add_certificate') }}" method="POST" enctype="multipart/form-data" class="space-y-3">
                        
                        <input type="text" name="title" required placeholder="Certificate Title" class="form-input w-full rounded-lg p-3 text-sm">
                        <p>Upload photo </p>
                        <input class="form-input block w-full text-sm rounded-lg cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-900/50 file:text-green-300 hover:file:bg-green-900" type="file" name="certificate_image" required>
                        <button type="submit" class="w-full btn-gradient text-white font-semibold py-2 px-4 rounded-xl">Add Certificate</button>
                    </form>
                </div>

                <!-- Your Projects List -->
                <div class="glass-card rounded-2xl p-6 animate-fadeInUp" style="animation-delay: 0.6s;">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="bi bi-collection-fill text-indigo-400"></i> Your Projects</h3>
                    <ul class="space-y-2">
                        {% for project in student.projects %}
                            <li class="list-group-item flex justify-between items-center p-3 rounded-lg">
                                <span>{{ project.project_title }}</span>
                                <a href="{{ url_for('delete_project', project_id=project.id) }}" class="btn-gradient btn-gradient-danger text-white text-xs font-bold py-1 px-3 rounded-full"><i class="bi bi-trash"></i></a>
                            </li>
                        {% else %}
                            <li class="list-group-item text-center text-gray-400 p-3 rounded-lg">No projects added yet.</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>